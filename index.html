<head>
<!--
  Importing Onsen UI framework
-->
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <style>
  <!--
  That style used to add blank row in table for better view
-->
  .blank_row
		{
			height: 15px !important;
		}
  </style>
<title>JavaScript Loan Calculator</title></head>
<div class="toolbar toolbar--material">
  <div class="toolbar__center toolbar--material__center">
    JavaScript Loan Calculator
  </div>
</div>
<body bgcolor="white">
<form name="loandata">
  <table>
  <tr class="blank_row"><td></td></tr>
    <tr><td colspan="3"><b class="card__title">Enter Loan Information:</b></td></tr>
    <tr>
      <td>1)</td>
      <td>Loan amount:</td>
      <td><input class="text-input text-input--material" type="text" name="principal" size="12" 
                 onchange="calculate();"></td>
    </tr>
    <tr>
      <td>2)</td>
      <td>Annual bank interest, %:</td>
      <td><input class="text-input text-input--material" type="text" name="interest" size="12" 
                 onchange="calculate();"></td>
    </tr>
    <tr>
      <td>3)</td>
      <td>Total loan period, years:</td>
      <td><input class="text-input text-input--material" type="text" name="years" size="12" 
                 onchange="calculate();"></td>
    </tr>
	<tr class="blank_row"><td></td></tr>
    <tr><td colspan="3">
      <input class="button" type="button" value="Calculate" onclick="calculate();">
    </td>
	</tr>
	<tr class="blank_row"><td></td></tr>
    <tr><td colspan="3">
      <b class="card__title">Payment Information:</b>
    </td></tr>
    <tr>
      <td>4)</td>
      <td>Monthly payment:</td>
      <td><input class="text-input text-input--material" type="text" name="payment" size="12"></td>
    </tr>
    <tr>
      <td>5)</td>
      <td>Total payment:</td>
      <td><input class="text-input text-input--material" type="text" name="total" size="12"></td>
    </tr>
    <tr>
      <td>6)</td>
      <td>Total interest payments:</td>
      <td><input class="text-input text-input--material" type="text" name="totalinterest" size="12"></td>
    </tr>
  </table>
</form>
<span class="toolbar-button toolbar-button--material">
  Created by Sergei Ulvis for IU Web Application Development course as Task 4
</span>

<script language="JavaScript">
function calculate() {
    // get loan amount from form
	var principal = document.loandata.principal.value;
	// get percent amount from form, recalc to percent-at-month value
    var interest = document.loandata.interest.value / 100 / 12;
	// get years amount from form, multiply to get months count
    var payments = document.loandata.years.value * 12;

    // calculate monthly payment
    var x = Math.pow(1 + interest, payments);
    var monthly = (principal*x*interest)/(x-1);

    // if result is a normal number - display the results
    if (!isNaN(monthly) && 
        (monthly != Number.POSITIVE_INFINITY) &&
        (monthly != Number.NEGATIVE_INFINITY)) {

        document.loandata.payment.value = round(monthly);
        document.loandata.total.value = round(monthly * payments);
        document.loandata.totalinterest.value = 
            round((monthly * payments) - principal);
    }
	// if result is not a normal number - do not display the results
    else {
        document.loandata.payment.value = "";
        document.loandata.total.value = "";
        document.loandata.totalinterest.value = "";
    }
}

// rounds a number to two decimal places
function round(x) {
  return Math.round(x*100)/100;
}
</script>
</body>
</html>